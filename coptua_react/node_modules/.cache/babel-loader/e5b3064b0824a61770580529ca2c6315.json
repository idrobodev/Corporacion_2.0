{"ast":null,"code":"import React,{useState}from\"react\";import{useAuth}from\"../../components/Context/AuthContext\";import{api}from\"../../services/api\";import{dbService}from\"../../services/database\";import DashboardLayout from\"../../components/layout/DashboardLayout\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Configuracion=()=>{var _currentUser$user_met;const{currentUser}=useAuth();const[activeTab,setActiveTab]=useState(\"perfil\");const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const tabs=[{id:\"perfil\",label:\"Perfil\",icon:\"fas fa-user\"},{id:\"preferencias\",label:\"Preferencias\",icon:\"fas fa-sliders-h\"},{id:\"notificaciones\",label:\"Notificaciones\",icon:\"fas fa-bell\"},{id:\"seguridad\",label:\"Seguridad\",icon:\"fas fa-shield-alt\"}];const handleProfileUpdate=async()=>{if(!currentUser)return;setLoading(true);setError(null);setSuccess(null);try{const nombreInput=document.getElementById('nombre');const nombre=nombreInput===null||nombreInput===void 0?void 0:nombreInput.value.trim();if(nombre&&nombre!==currentUser.nombre){// Update user profile via API\nconst{data,error}=await api.updateProfile({nombre});if(error)throw new Error(error.message);setSuccess('Perfil actualizado correctamente');}else{setSuccess('No hay cambios para guardar');}}catch(err){setError('Error al actualizar el perfil: '+err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(DashboardLayout,{title:\"Configuraci\\xF3n\",subtitle:\"Administra tu perfil y preferencias de la plataforma\",children:/*#__PURE__*/_jsx(\"section\",{className:\"px-4 md:px-6 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/80 backdrop-blur rounded-xl border border-gray-200 shadow-sm p-2 flex overflow-auto\",children:tabs.map(t=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(t.id),className:\"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap mr-2 \".concat(activeTab===t.id?\"bg-blue-50 text-blue-700 ring-1 ring-blue-100\":\"text-gray-700 hover:bg-gray-50\"),children:[/*#__PURE__*/_jsx(\"i\",{className:\"\".concat(t.icon,\" text-sm\")}),t.label]},t.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-6\",children:[activeTab===\"perfil\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border border-gray-200 shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Datos de perfil\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600 mb-1\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border rounded-lg px-3 py-2\",defaultValue:(currentUser===null||currentUser===void 0?void 0:(_currentUser$user_met=currentUser.user_metadata)===null||_currentUser$user_met===void 0?void 0:_currentUser$user_met.full_name)||(currentUser===null||currentUser===void 0?void 0:currentUser.nombre)||'',id:\"nombre\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600 mb-1\",children:\"Correo\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border rounded-lg px-3 py-2\",value:(currentUser===null||currentUser===void 0?void 0:currentUser.email)||'',readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600 mb-1\",children:\"Rol\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border rounded-lg px-3 py-2 bg-gray-100\",value:(currentUser===null||currentUser===void 0?void 0:currentUser.rol)||'',readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600 mb-1\",children:\"Sede\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border rounded-lg px-3 py-2\",defaultValue:(currentUser===null||currentUser===void 0?void 0:currentUser.sede_nombre)||'No asignada',readOnly:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleProfileUpdate,className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\",disabled:loading,children:loading?'Guardando...':'Guardar cambios'}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-2\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"text-green-500 text-sm mt-2\",children:success})]})]}),activeTab===\"preferencias\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border border-gray-200 shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Preferencias\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-checkbox\"}),\"Modo compacto de tablas\"]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-checkbox\"}),\"Mostrar ayudas contextuales\"]})]})]}),activeTab===\"notificaciones\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border border-gray-200 shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Notificaciones\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Recordatorios de mensualidades\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-switch\"})]})})]}),activeTab===\"seguridad\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border border-gray-200 shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Seguridad\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600 mb-1\",children:\"Contrase\\xF1a actual\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"w-full border rounded-lg px-3 py-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600 mb-1\",children:\"Nueva contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"w-full border rounded-lg px-3 py-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-600 mb-1\",children:\"Confirmar nueva contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"w-full border rounded-lg px-3 py-2\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",children:\"Actualizar contrase\\xF1a\"})})]})]}),/*#__PURE__*/_jsxs(\"aside\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border border-gray-200 shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-700 mb-2\",children:\"Consejos de seguridad\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc pl-5 text-sm text-gray-600 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Usa contrase\\xF1as fuertes y \\xFAnicas.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Activa la verificaci\\xF3n en dos pasos si est\\xE1 disponible.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Revisa peri\\xF3dicamente tus dispositivos activos.\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-100 rounded-xl p-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-800\",children:\"\\xBFNecesitas ayuda? Contacta al equipo de soporte para asistencia personalizada.\"})})]})]})]})})});};export default Configuracion;","map":null,"metadata":{},"sourceType":"module"}