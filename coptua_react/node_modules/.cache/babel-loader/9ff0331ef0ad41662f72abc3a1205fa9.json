{"ast":null,"code":"import { supabase } from '../supabase/supabaseClient';\n\n// Definición de roles del sistema\nexport const ROLES = {\n  CONSULTA: 1,\n  ADMINISTRADOR: 2\n};\nclass DatabaseService {\n  // Obtener usuario actual con rol\n  async getCurrentUser() {\n    try {\n      const {\n        data: {\n          user\n        },\n        error: authError\n      } = await supabase.auth.getUser();\n      if (authError || !user) {\n        return {\n          data: null,\n          error: authError\n        };\n      }\n\n      // Buscar información del usuario en la tabla usuarios\n      const {\n        data: userData,\n        error: dbError\n      } = await supabase.from('usuarios').select('*').eq('email', user.email).single();\n      if (dbError && dbError.code !== 'PGRST116') {\n        // PGRST116 = no rows returned\n        console.error('Error fetching user data:', dbError);\n        return {\n          data: {\n            ...user,\n            rol: ROLES.CONSULTA\n          },\n          error: null\n        };\n      }\n      return {\n        data: userData ? {\n          ...user,\n          ...userData\n        } : {\n          ...user,\n          rol: ROLES.CONSULTA\n        },\n        error: null\n      };\n    } catch (error) {\n      console.error('Error in getCurrentUser:', error);\n      return {\n        data: null,\n        error\n      };\n    }\n  }\n\n  // Verificar permisos del usuario\n  async hasPermission(requiredRole) {\n    try {\n      const {\n        data: user\n      } = await this.getCurrentUser();\n      if (!user) return false;\n      const userRole = user.rol || ROLES.CONSULTA;\n\n      // Jerarquía de roles: ADMINISTRADOR > CONSULTA\n      const roleHierarchy = {\n        [ROLES.ADMINISTRADOR]: 2,\n        [ROLES.CONSULTA]: 1\n      };\n      const userLevel = roleHierarchy[userRole] || 1;\n      const requiredLevel = roleHierarchy[requiredRole] || 1;\n      return userLevel >= requiredLevel;\n    } catch (error) {\n      console.error('Error checking permissions:', error);\n      return false;\n    }\n  }\n\n  // Obtener datos del dashboard\n  async getDashboardData() {\n    try {\n      const [participantesRes, mensualidadesRes] = await Promise.all([supabase.from('participantes').select('*', {\n        count: 'exact'\n      }), supabase.from('mensualidades').select('*', {\n        count: 'exact'\n      })]);\n      return {\n        participantes: participantesRes.count || 0,\n        mensualidades: mensualidadesRes.count || 0,\n        error: null\n      };\n    } catch (error) {\n      console.error('Error fetching dashboard data:', error);\n      return {\n        error\n      };\n    }\n  }\n\n  // Obtener participantes\n  async getParticipantes() {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('participantes').select(`\n          *,\n          sedes (\n            nombre,\n            direccion\n          )\n        `).order('created_at', {\n        ascending: false\n      });\n      if (error) {\n        console.error('Database error in getParticipantes:', error);\n        return {\n          data: [],\n          error\n        };\n      }\n      return {\n        data: data || [],\n        error: null\n      };\n    } catch (error) {\n      console.error('Error fetching participantes:', error);\n      return {\n        data: [],\n        error: {\n          message: 'Error interno del servidor'\n        }\n      };\n    }\n  }\n\n  // Obtener mensualidades/pagos\n  async getMensualidades() {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('mensualidades').select(`\n          *,\n          participantes (\n            nombre,\n            apellido\n          )\n        `).order('created_at', {\n        ascending: false\n      });\n      if (error) {\n        console.error('Database error in getMensualidades:', error);\n        return {\n          data: [],\n          error\n        };\n      }\n      return {\n        data: data || [],\n        error: null\n      };\n    } catch (error) {\n      console.error('Error fetching mensualidades:', error);\n      return {\n        data: [],\n        error: {\n          message: 'Error interno del servidor'\n        }\n      };\n    }\n  }\n\n  // Crear nuevo participante\n  async createParticipante(participanteData) {\n    try {\n      // Validar datos requeridos\n      if (!participanteData.nombre || !participanteData.email) {\n        return {\n          data: null,\n          error: {\n            message: 'Nombre y email son campos obligatorios'\n          }\n        };\n      }\n\n      // Sanitizar datos\n      const sanitizedData = {\n        ...participanteData,\n        nombre: participanteData.nombre.trim(),\n        email: participanteData.email.toLowerCase().trim(),\n        created_at: new Date().toISOString()\n      };\n      const {\n        data,\n        error\n      } = await supabase.from('participantes').insert([sanitizedData]).select().single();\n      if (error) {\n        console.error('Database error in createParticipante:', error);\n        return {\n          data: null,\n          error\n        };\n      }\n      return {\n        data,\n        error: null\n      };\n    } catch (error) {\n      console.error('Error creating participante:', error);\n      return {\n        data: null,\n        error: {\n          message: 'Error interno del servidor'\n        }\n      };\n    }\n  }\n\n  // Actualizar participante\n  async updateParticipante(id, participanteData) {\n    try {\n      // Validar ID\n      if (!id || isNaN(id)) {\n        return {\n          data: null,\n          error: {\n            message: 'ID de participante inválido'\n          }\n        };\n      }\n\n      // Sanitizar datos de actualización\n      const sanitizedData = {\n        ...participanteData\n      };\n      if (sanitizedData.nombre) {\n        sanitizedData.nombre = sanitizedData.nombre.trim();\n      }\n      if (sanitizedData.email) {\n        sanitizedData.email = sanitizedData.email.toLowerCase().trim();\n      }\n      sanitizedData.updated_at = new Date().toISOString();\n      const {\n        data,\n        error\n      } = await supabase.from('participantes').update(sanitizedData).eq('id', id).select().single();\n      if (error) {\n        console.error('Database error in updateParticipante:', error);\n        return {\n          data: null,\n          error\n        };\n      }\n      return {\n        data,\n        error: null\n      };\n    } catch (error) {\n      console.error('Error updating participante:', error);\n      return {\n        data: null,\n        error: {\n          message: 'Error interno del servidor'\n        }\n      };\n    }\n  }\n\n  // Eliminar participante\n  async deleteParticipante(id) {\n    try {\n      const {\n        error\n      } = await supabase.from('participantes').delete().eq('id', id);\n      return {\n        error\n      };\n    } catch (error) {\n      console.error('Error deleting participante:', error);\n      return {\n        error\n      };\n    }\n  }\n\n  // Obtener sedes\n  async getSedes() {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('sedes').select('*').order('nombre');\n      if (error) {\n        console.error('Database error in getSedes:', error);\n        return {\n          data: [],\n          error\n        };\n      }\n      return {\n        data: data || [],\n        error: null\n      };\n    } catch (error) {\n      console.error('Error fetching sedes:', error);\n      return {\n        data: [],\n        error: {\n          message: 'Error interno del servidor'\n        }\n      };\n    }\n  }\n\n  // Crear nueva mensualidad\n  async createMensualidad(mensualidadData) {\n    try {\n      // Validar datos requeridos\n      if (!mensualidadData.participante_id || !mensualidadData.valor) {\n        return {\n          data: null,\n          error: {\n            message: 'Participante y valor son campos obligatorios'\n          }\n        };\n      }\n\n      // Sanitizar datos\n      const sanitizedData = {\n        ...mensualidadData,\n        valor: parseFloat(mensualidadData.valor),\n        created_at: new Date().toISOString()\n      };\n      const {\n        data,\n        error\n      } = await supabase.from('mensualidades').insert([sanitizedData]).select().single();\n      if (error) {\n        console.error('Database error in createMensualidad:', error);\n        return {\n          data: null,\n          error\n        };\n      }\n      return {\n        data,\n        error: null\n      };\n    } catch (error) {\n      console.error('Error creating mensualidad:', error);\n      return {\n        data: null,\n        error: {\n          message: 'Error interno del servidor'\n        }\n      };\n    }\n  }\n\n  // Actualizar mensualidad\n  async updateMensualidad(id, mensualidadData) {\n    try {\n      // Validar ID\n      if (!id || isNaN(id)) {\n        return {\n          data: null,\n          error: {\n            message: 'ID de mensualidad inválido'\n          }\n        };\n      }\n\n      // Sanitizar datos\n      const sanitizedData = {\n        ...mensualidadData\n      };\n      if (sanitizedData.valor) {\n        sanitizedData.valor = parseFloat(sanitizedData.valor);\n      }\n      sanitizedData.updated_at = new Date().toISOString();\n      const {\n        data,\n        error\n      } = await supabase.from('mensualidades').update(sanitizedData).eq('id', id).select().single();\n      if (error) {\n        console.error('Database error in updateMensualidad:', error);\n        return {\n          data: null,\n          error\n        };\n      }\n      return {\n        data,\n        error: null\n      };\n    } catch (error) {\n      console.error('Error updating mensualidad:', error);\n      return {\n        data: null,\n        error: {\n          message: 'Error interno del servidor'\n        }\n      };\n    }\n  }\n\n  // Validar estructura de base de datos\n  async validateDatabaseStructure() {\n    const requiredTables = ['usuarios', 'participantes', 'mensualidades', 'sedes', 'fundacion'];\n    const results = {};\n    for (const table of requiredTables) {\n      try {\n        const {\n          error\n        } = await supabase.from(table).select('*', {\n          count: 'exact',\n          head: true\n        });\n        results[table] = error ? {\n          status: 'error',\n          message: error.message\n        } : {\n          status: 'ok'\n        };\n      } catch (err) {\n        results[table] = {\n          status: 'error',\n          message: err.message\n        };\n      }\n    }\n    return results;\n  }\n}\n\n// Exportar instancia única del servicio\nexport const dbService = new DatabaseService();\nexport default dbService;","map":{"version":3,"names":["supabase","ROLES","CONSULTA","ADMINISTRADOR","DatabaseService","getCurrentUser","data","user","error","authError","auth","getUser","userData","dbError","from","select","eq","email","single","code","console","rol","hasPermission","requiredRole","userRole","roleHierarchy","userLevel","requiredLevel","getDashboardData","participantesRes","mensualidadesRes","Promise","all","count","participantes","mensualidades","getParticipantes","order","ascending","message","getMensualidades","createParticipante","participanteData","nombre","sanitizedData","trim","toLowerCase","created_at","Date","toISOString","insert","updateParticipante","id","isNaN","updated_at","update","deleteParticipante","delete","getSedes","createMensualidad","mensualidadData","participante_id","valor","parseFloat","updateMensualidad","validateDatabaseStructure","requiredTables","results","table","head","status","err","dbService"],"sources":["/Users/todoporunalma/Desktop/coptua_react/src/services/databaseService.js"],"sourcesContent":["import { supabase } from '../supabase/supabaseClient';\n\n// Definición de roles del sistema\nexport const ROLES = {\n  CONSULTA: 1,\n  ADMINISTRADOR: 2\n};\n\nclass DatabaseService {\n  // Obtener usuario actual con rol\n  async getCurrentUser() {\n    try {\n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      \n      if (authError || !user) {\n        return { data: null, error: authError };\n      }\n\n      // Buscar información del usuario en la tabla usuarios\n      const { data: userData, error: dbError } = await supabase\n        .from('usuarios')\n        .select('*')\n        .eq('email', user.email)\n        .single();\n\n      if (dbError && dbError.code !== 'PGRST116') { // PGRST116 = no rows returned\n        console.error('Error fetching user data:', dbError);\n        return { data: { ...user, rol: ROLES.CONSULTA }, error: null };\n      }\n\n      return { \n        data: userData ? { ...user, ...userData } : { ...user, rol: ROLES.CONSULTA }, \n        error: null \n      };\n    } catch (error) {\n      console.error('Error in getCurrentUser:', error);\n      return { data: null, error };\n    }\n  }\n\n  // Verificar permisos del usuario\n  async hasPermission(requiredRole) {\n    try {\n      const { data: user } = await this.getCurrentUser();\n      \n      if (!user) return false;\n\n      const userRole = user.rol || ROLES.CONSULTA;\n      \n      // Jerarquía de roles: ADMINISTRADOR > CONSULTA\n      const roleHierarchy = {\n        [ROLES.ADMINISTRADOR]: 2,\n        [ROLES.CONSULTA]: 1\n      };\n\n      const userLevel = roleHierarchy[userRole] || 1;\n      const requiredLevel = roleHierarchy[requiredRole] || 1;\n\n      return userLevel >= requiredLevel;\n    } catch (error) {\n      console.error('Error checking permissions:', error);\n      return false;\n    }\n  }\n\n  // Obtener datos del dashboard\n  async getDashboardData() {\n    try {\n      const [participantesRes, mensualidadesRes] = await Promise.all([\n        supabase.from('participantes').select('*', { count: 'exact' }),\n        supabase.from('mensualidades').select('*', { count: 'exact' })\n      ]);\n\n      return {\n        participantes: participantesRes.count || 0,\n        mensualidades: mensualidadesRes.count || 0,\n        error: null\n      };\n    } catch (error) {\n      console.error('Error fetching dashboard data:', error);\n      return { error };\n    }\n  }\n\n  // Obtener participantes\n  async getParticipantes() {\n    try {\n      const { data, error } = await supabase\n        .from('participantes')\n        .select(`\n          *,\n          sedes (\n            nombre,\n            direccion\n          )\n        `)\n        .order('created_at', { ascending: false });\n\n      if (error) {\n        console.error('Database error in getParticipantes:', error);\n        return { data: [], error };\n      }\n\n      return { data: data || [], error: null };\n    } catch (error) {\n      console.error('Error fetching participantes:', error);\n      return { data: [], error: { message: 'Error interno del servidor' } };\n    }\n  }\n\n  // Obtener mensualidades/pagos\n  async getMensualidades() {\n    try {\n      const { data, error } = await supabase\n        .from('mensualidades')\n        .select(`\n          *,\n          participantes (\n            nombre,\n            apellido\n          )\n        `)\n        .order('created_at', { ascending: false });\n\n      if (error) {\n        console.error('Database error in getMensualidades:', error);\n        return { data: [], error };\n      }\n\n      return { data: data || [], error: null };\n    } catch (error) {\n      console.error('Error fetching mensualidades:', error);\n      return { data: [], error: { message: 'Error interno del servidor' } };\n    }\n  }\n\n\n  // Crear nuevo participante\n  async createParticipante(participanteData) {\n    try {\n      // Validar datos requeridos\n      if (!participanteData.nombre || !participanteData.email) {\n        return { \n          data: null, \n          error: { message: 'Nombre y email son campos obligatorios' } \n        };\n      }\n\n      // Sanitizar datos\n      const sanitizedData = {\n        ...participanteData,\n        nombre: participanteData.nombre.trim(),\n        email: participanteData.email.toLowerCase().trim(),\n        created_at: new Date().toISOString()\n      };\n\n      const { data, error } = await supabase\n        .from('participantes')\n        .insert([sanitizedData])\n        .select()\n        .single();\n\n      if (error) {\n        console.error('Database error in createParticipante:', error);\n        return { data: null, error };\n      }\n\n      return { data, error: null };\n    } catch (error) {\n      console.error('Error creating participante:', error);\n      return { \n        data: null, \n        error: { message: 'Error interno del servidor' } \n      };\n    }\n  }\n\n  // Actualizar participante\n  async updateParticipante(id, participanteData) {\n    try {\n      // Validar ID\n      if (!id || isNaN(id)) {\n        return { \n          data: null, \n          error: { message: 'ID de participante inválido' } \n        };\n      }\n\n      // Sanitizar datos de actualización\n      const sanitizedData = { ...participanteData };\n      if (sanitizedData.nombre) {\n        sanitizedData.nombre = sanitizedData.nombre.trim();\n      }\n      if (sanitizedData.email) {\n        sanitizedData.email = sanitizedData.email.toLowerCase().trim();\n      }\n      sanitizedData.updated_at = new Date().toISOString();\n\n      const { data, error } = await supabase\n        .from('participantes')\n        .update(sanitizedData)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) {\n        console.error('Database error in updateParticipante:', error);\n        return { data: null, error };\n      }\n\n      return { data, error: null };\n    } catch (error) {\n      console.error('Error updating participante:', error);\n      return { \n        data: null, \n        error: { message: 'Error interno del servidor' } \n      };\n    }\n  }\n\n  // Eliminar participante\n  async deleteParticipante(id) {\n    try {\n      const { error } = await supabase\n        .from('participantes')\n        .delete()\n        .eq('id', id);\n\n      return { error };\n    } catch (error) {\n      console.error('Error deleting participante:', error);\n      return { error };\n    }\n  }\n\n  // Obtener sedes\n  async getSedes() {\n    try {\n      const { data, error } = await supabase\n        .from('sedes')\n        .select('*')\n        .order('nombre');\n\n      if (error) {\n        console.error('Database error in getSedes:', error);\n        return { data: [], error };\n      }\n\n      return { data: data || [], error: null };\n    } catch (error) {\n      console.error('Error fetching sedes:', error);\n      return { data: [], error: { message: 'Error interno del servidor' } };\n    }\n  }\n\n  // Crear nueva mensualidad\n  async createMensualidad(mensualidadData) {\n    try {\n      // Validar datos requeridos\n      if (!mensualidadData.participante_id || !mensualidadData.valor) {\n        return { \n          data: null, \n          error: { message: 'Participante y valor son campos obligatorios' } \n        };\n      }\n\n      // Sanitizar datos\n      const sanitizedData = {\n        ...mensualidadData,\n        valor: parseFloat(mensualidadData.valor),\n        created_at: new Date().toISOString()\n      };\n\n      const { data, error } = await supabase\n        .from('mensualidades')\n        .insert([sanitizedData])\n        .select()\n        .single();\n\n      if (error) {\n        console.error('Database error in createMensualidad:', error);\n        return { data: null, error };\n      }\n\n      return { data, error: null };\n    } catch (error) {\n      console.error('Error creating mensualidad:', error);\n      return { \n        data: null, \n        error: { message: 'Error interno del servidor' } \n      };\n    }\n  }\n\n  // Actualizar mensualidad\n  async updateMensualidad(id, mensualidadData) {\n    try {\n      // Validar ID\n      if (!id || isNaN(id)) {\n        return { \n          data: null, \n          error: { message: 'ID de mensualidad inválido' } \n        };\n      }\n\n      // Sanitizar datos\n      const sanitizedData = { ...mensualidadData };\n      if (sanitizedData.valor) {\n        sanitizedData.valor = parseFloat(sanitizedData.valor);\n      }\n      sanitizedData.updated_at = new Date().toISOString();\n\n      const { data, error } = await supabase\n        .from('mensualidades')\n        .update(sanitizedData)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) {\n        console.error('Database error in updateMensualidad:', error);\n        return { data: null, error };\n      }\n\n      return { data, error: null };\n    } catch (error) {\n      console.error('Error updating mensualidad:', error);\n      return { \n        data: null, \n        error: { message: 'Error interno del servidor' } \n      };\n    }\n  }\n\n  // Validar estructura de base de datos\n  async validateDatabaseStructure() {\n    const requiredTables = ['usuarios', 'participantes', 'mensualidades', 'sedes', 'fundacion'];\n    const results = {};\n\n    for (const table of requiredTables) {\n      try {\n        const { error } = await supabase\n          .from(table)\n          .select('*', { count: 'exact', head: true });\n        \n        results[table] = error ? { status: 'error', message: error.message } : { status: 'ok' };\n      } catch (err) {\n        results[table] = { status: 'error', message: err.message };\n      }\n    }\n\n    return results;\n  }\n}\n\n// Exportar instancia única del servicio\nexport const dbService = new DatabaseService();\nexport default dbService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}